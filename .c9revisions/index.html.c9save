{"ts":1360598549840,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<!DOCTYPE html>\n<html>\n    <head>\n        <title></title>\n        <style>\n            .puller{\n                height: 31px;\n                background-color: rgb(44,44,44);\n                width: 60px;\n                position: fixed;\n                top: -6px;\n                right: 20px;\n                padding-top: 10px;\n                border-bottom-right-radius: 6px;\n                border-bottom-left-radius: 6px;\n               -webkit-box-shadow:  6px 6px 6px 0px rgba(0, 0, 0, .6);\n                box-shadow:  6px 6px 6px 0px rgba(0, 0, 0, .6);\n                cursor:pointer;\n            }\n            \n            .grip{\n                border-bottom: 2px solid white;\n                height: 2px;\n                width: 40px;\n                margin: auto;\n                margin-top: 2px;\n                padding: 0px;\n                -webkit-box-shadow: inset 1px 1px 1px 1px rgba(88,88,88, 1);\n                box-shadow: inset 1px 1px 1px 1px rgba(88,88,88, 1);\n            }\n\n            .content{\n                color: white;\n            }\n            \n            .pulldown-content{\n                position: fixed;\n                width: 100%;\n            }\n\n            #pull{\n                background-color: rgb(44,44,44);\n            }\n            \n        </style>\n    </head>\n    <body>\n        <div id=\"pull\" class=\"content\">\n            I'm the stuff that should get pulled down.\n        </div>\n        <h1>\n            Lets create a pull down thingy.\n        </h1>\n        <script>\n            /*globals console:true*/\n            ;(function( window, undefined ){\n                'use strict';\n\n                var pullDownThingy = ( function( ){\n                    \n                    var puller = document.createElement( 'div' ),\n                        contentContainer = null,\n                        containerHeight = null,\n                        _options = { },\n                        iterationTime,\n                        currentHeight = 0,\n                        animationLoop;\n                    \n                    puller.className = 'puller';\n                    \n                    var addTexture = function( ){\n                        \n                        var texture = document.createDocumentFragment( ),\n                            grip = document.createElement( 'div' );\n                        \n                        grip.className = 'grip';\n                        \n                        texture.appendChild( grip );\n                        texture.appendChild( grip.cloneNode( ) );\n                        texture.appendChild( grip.cloneNode( ) );\n                        \n                        puller.appendChild( texture );\n                    };\n                    \n                    var transformElement = function( ){\n                        \n                        containerHeight = contentContainer.offsetHeight;\n                        \n                        currentHeight = containerHeight * -1;\n\n                        contentContainer.className = contentContainer.className + ' pulldown-content';\n                        \n                        contentContainer.style.top = ( containerHeight * -1 ) + 'px';\n\n                        //make the puller go below the content\n                        puller.style.zIndex = 9998;\n                        contentContainer.style.zIndex = 9999;\n                    };\n                    \n                    var animateDown = function(){\n                        ++currentHeight;\n\n                        contentContainer.style.top = currentHeight + 'px';\n                        puller.style.top = -6 + (containerHeight + currentHeight) + 'px';\n\n                        if( currentHeight === 0 ){\n                            window.clearInterval( animationLoop );\n                        }\n                    }\n                    \n                    var animateUp = function(){\n                        --currentHeight;\n\n                        contentContainer.style.top = currentHeight + 'px';\n                        puller.style.top = -6 + (containerHeight + currentHeight) + 'px';\n\n                        if( currentHeight <= ( containerHeight * -1 ) ){\n                            \n                            contentContainer.style.top = containerHeight;\n                            window.clearInterval( animationLoop );\n                        }\n                    }\n\n                    var clickHandler = function( e ){\n                        if( parseInt( contentContainer.style.top, 10 ) < 0 ){\n                            \n                            animationLoop = window.setInterval( animateDown, iterationTime );\n                        }\n                        else{\n                            \n                            animationLoop = window.setInterval( animateUp, iterationTime );\n\n                        }\n                    };\n                    \n                    var addElement = function( ){\n                        \n                        puller.addEventListener( 'click', clickHandler );\n                        \n                        document.body.appendChild( puller );\n                    };\n                    \n                    var init = function( selector, options ){ \n\n                        var defaults = { speed : 400 },\n                            key;\n\n                        if( typeof selector === 'undefined' ){\n                            \n                            throw 'No selector defined';\n                        }\n\n                        for( key in defaults ){\n                            _options[ key ] = defaults[ key ];\n                        }\n\n                        for( key in options ){\n                            _options[ key ] = options[ key ];\n                        }\n\n                        var iterationTime = _options.speed / containerHeight;\n                        \n                        contentContainer = document.querySelectorAll( selector );\n                        \n                        if( !contentContainer.length ){\n                            \n                            throw 'No element found';\n                        }\n                        \n                        contentContainer = contentContainer[ 0 ];\n                        \n                        transformElement( );\n                            \n                        addTexture( );\n                        \n                        addElement( );\n                    };\n                    \n                    return {\n                        init : init\n                    };\n                    \n                }( ) );\n                \n                window.pullDownThingy = pullDownThingy;\n                \n            }( window ) );\n                \n            \n            document.onreadystatechange = function( ){\n                \n                if( document.readyState == 'complete' ){\n                    pullDownThingy.init( '#pull' );\n                }\n            };\n        </script>\n    </body>\n</html>\n"]],"start1":0,"start2":0,"length1":0,"length2":7044}]],"length":7044}
